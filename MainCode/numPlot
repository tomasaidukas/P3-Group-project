#!/usr/bin/gnuplot
#
# Plots the Potential and Electric Field graphs from the output of the Numerical Solution
#

#-------------------------#
#        POTENTIAL        #
#-------------------------#

set terminal png
set output "Vnumerical.png"
set pm3d map
set palette defined (-10 "blue", -5 "cyan", -1 "turquoise", 0 "black", 1 "orange", 5 "sandybrown", 10 "red")
splot "numerical.txt" matrix

set output "Vanalytical.png"
set pm3d map
set palette defined (-10 "blue", -5 "cyan", -1 "turquoise", 0 "black", 1 "orange", 5 "sandybrown", 10 "red")
splot "analytical.txt" matrix

set output "VnumCircle.png"
set pm3d map
set palette defined (-10 "blue", -5 "cyan", -1 "turquoise", 0 "black", 1 "orange", 5 "sandybrown", 10 "red")
splot "numCircle.txt" matrix

set output "Vdifference.png"
set pm3d map
set palette defined (-10 "blue", -5 "cyan", -1 "turquoise", 0 "black", 1 "orange", 5 "sandybrown", 10 "red")
splot "difference.txt" matrix

set output "Vratio.png"
set pm3d map
set palette defined (0 "black", 0.01 "white", 0.1 "blue")
splot "ratio.txt" matrix
#reset

#-------------------------#
# EQUIPOTENTIAL LINES #
#-------------------------#

#xmax, ymax, V must have specific values
# 'analytical.txt' must have data in the format
# x y Potential_Value
#Should also work for electric field lines for data in the format
# x y Electric_Field_Value
set xrange [0:49]
set yrange [0:49]
set isosample 250,250
set table 'analytical.dat'
splot 'analytical.txt'
unset table
set contour base
set cntrparam level incremental -100, 1, 100
unset surface
set table 'lines.dat'
splot 'analytical.txt'
unset table
reset
set xrange [0:49]
set yrange [0:49]
unset key
set term postscript color
set output 'equipotential.eps'
plot 'analytical.dat' with image, 'lines.dat' with l lt -1 lw 0.5

#-------------------------#
#      ELECTRIC FIELD     #
#-------------------------#

exit

